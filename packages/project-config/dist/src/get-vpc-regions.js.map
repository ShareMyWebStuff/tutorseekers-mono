{"version":3,"file":"get-vpc-regions.js","sourceRoot":"/","sources":["src/get-vpc-regions.ts"],"names":[],"mappings":";;;AAAA,qCAAkD;AAWlD;;GAEG;AACI,MAAM,aAAa,GAAG,GAAG,EAAE;IAChC,MAAM,WAAW,GAAkB,EAAE,CAAC;IAEtC,MAAM,CAAC,MAAM,CAAC,sBAAa,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;QAC/C,wBAAwB;QACxB,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;YACpC,IACE,QAAQ,CAAC,SAAS,KAAK,SAAS;gBAChC,CAAC,CAAC,QAAQ,CAAC,YAAY;gBACvB,CAAC,CAAC,QAAQ,CAAC,MAAM,EACjB,CAAC;gBACD,MAAM,GAAG,GAAG,gBAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBAErC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;oBAClC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG;wBAC7B,GAAG,GAAG;wBACN,QAAQ,EAAE,IAAI;wBACd,OAAO,EAAE,KAAK;qBACf,CAAC;gBACJ,CAAC;qBAAM,CAAC;oBACN,MAAM,eAAe,GAAG,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;oBACvD,IAAI,eAAe,EAAE,CAAC;wBACpB,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAC/C,CAAC;gBACH,CAAC;YACH,CAAC;YAED,wBAAwB;YACxB,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBACnC,cAAc;gBACd,IACE,OAAO,CAAC,SAAS,KAAK,SAAS;oBAC/B,CAAC,CAAC,OAAO,CAAC,YAAY;oBACtB,CAAC,CAAC,OAAO,CAAC,MAAM,EAChB,CAAC;oBACD,MAAM,GAAG,GAAG,gBAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBACpC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;wBACjC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG;4BAC5B,GAAG,GAAG;4BACN,QAAQ,EAAE,KAAK;4BACf,OAAO,EAAE,IAAI;yBACd,CAAC;oBACJ,CAAC;yBAAM,CAAC;wBACN,MAAM,eAAe,GAAG,CAAC,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;wBACtD,IAAI,eAAe,EAAE,CAAC;4BACpB,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;wBAC7C,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,OAAO,WAAW,CAAC;AACrB,CAAC,CAAC;AArDW,QAAA,aAAa,iBAqDxB","sourcesContent":["import { REGIONS, WEBSITE_SETUP } from \"./config\";\r\n\r\ntype T_VPCS_CREATE = {\r\n  [key: string]: {\r\n    region: string;\r\n    awsRegion: string;\r\n    frontend: boolean;\r\n    backend: boolean;\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport const getVpcRegions = () => {\r\n  const vpsToCreate: T_VPCS_CREATE = {};\r\n\r\n  Object.values(WEBSITE_SETUP).forEach((website) => {\r\n    // Loop throug frontends\r\n    website.frontend.forEach((frontend) => {\r\n      if (\r\n        frontend.subDomain !== undefined &&\r\n        !!frontend.domainNameId &&\r\n        !!frontend.region\r\n      ) {\r\n        const reg = REGIONS[frontend.region];\r\n\r\n        if (!vpsToCreate[frontend.region]) {\r\n          vpsToCreate[frontend.region] = {\r\n            ...reg,\r\n            frontend: true,\r\n            backend: false,\r\n          };\r\n        } else {\r\n          const awsRegionExists = !!vpsToCreate[frontend.region];\r\n          if (awsRegionExists) {\r\n            vpsToCreate[frontend.region].frontend = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      // Loop through backends\r\n      frontend.backend.forEach((backend) => {\r\n        // Add backend\r\n        if (\r\n          backend.subDomain !== undefined &&\r\n          !!backend.domainNameId &&\r\n          !!backend.region\r\n        ) {\r\n          const reg = REGIONS[backend.region];\r\n          if (!vpsToCreate[backend.region]) {\r\n            vpsToCreate[backend.region] = {\r\n              ...reg,\r\n              frontend: false,\r\n              backend: true,\r\n            };\r\n          } else {\r\n            const awsRegionExists = !!vpsToCreate[backend.region];\r\n            if (awsRegionExists) {\r\n              vpsToCreate[backend.region].backend = true;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  });\r\n  return vpsToCreate;\r\n};\r\n"]}