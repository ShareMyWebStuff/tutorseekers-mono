-- Database deploy script

-- DeployId|Insert Description|Insert Script|Insert Rows Affected|Uninstall Description|Uninstall Script|Uninstall Rows Affected|Data Filename for bulk loading|Mode

-- Load initial procedures that help create the database
1    |Drop CreateIndex procedure if it exists                      |procedures/helpers/uninstall/create_index_drop.sql                            |         |Drop the CreateIndex procedure                           |procedures/helpers/uninstall/create_index_drop.sql                        |         |                                                  |
2    |Create the CreateIndex procedure                             |procedures/helpers/install/create_index_create.sql                            |         |Drop the CreateIndex procedure                           |procedures/helpers/uninstall/create_index_drop.sql                        |         |                                                  |

-- Drop the geo tables
10   |Drop the geo_countries table                                 |tables/geo/uninstall/geo_countries_drop.sql                                   |         |Drop the geo_countries table                             |tables/geo/uninstall/geo_countries_drop.sql                               |         |                                                  |
11   |Drop the geo_distances table                                 |tables/geo/uninstall/geo_distances_drop.sql                                   |         |Drop the geo_distances table                             |tables/geo/uninstall/geo_distances_drop.sql                               |         |                                                  |
12   |Drop the geo_locations table                                 |tables/geo/uninstall/geo_locations_drop.sql                                   |         |Drop the geo_locations table                             |tables/geo/uninstall/geo_locations_drop.sql                               |         |                                                  |
13   |Drop the geo_postcodes table                                 |tables/geo/uninstall/geo_postcodes_drop.sql                                   |         |Drop the geo_postcodes table                             |tables/geo/uninstall/geo_postcodes_drop.sql                               |         |                                                  |
14   |Drop the geo_regions table                                   |tables/geo/uninstall/geo_regions_drop.sql                                     |         |Drop the geo_regions table                               |tables/geo/uninstall/geo_regions_drop.sql                                 |         |                                                  |

-- Create the geo tables
20   |Create the geo_countries table                               |tables/geo/install/geo_countries_create.sql                                   |         |Drop the geo_countries table                             |tables/geo/uninstall/geo_countries_drop.sql                               |         |                                                  |
21   |Create the geo_distances table                               |tables/geo/install/geo_distances_create.sql                                   |         |Drop the geo_distances table                             |tables/geo/uninstall/geo_distances_drop.sql                               |         |                                                  |
22   |Create the geo_locations table                               |tables/geo/install/geo_locations_create.sql                                   |         |Drop the geo_locations table                             |tables/geo/uninstall/geo_locations_drop.sql                               |         |                                                  |
23   |Create the geo_postcodes table                               |tables/geo/install/geo_postcodes_create.sql                                   |         |Drop the geo_postcodes table                             |tables/geo/uninstall/geo_postcodes_drop.sql                               |         |                                                  |
24   |Create the geo_regions table                                 |tables/geo/install/geo_regions_create.sql                                     |         |Drop the geo_regions table                               |tables/geo/uninstall/geo_regions_drop.sql                                 |         |                                                  |

-- Create geo table indexes
30   |Create geo_distances index from / to location                |indexes/geo/install/geo_distances_from_location_to_location_create.sql        |         |Drop geo_distances index from / to location              |                                                                          |         |                                                  |
31   |Create geo_distances index from location                     |indexes/geo/install/geo_distances_from_location_create.sql                    |         |Drop geo_distances index from location                   |                                                                          |         |                                                  |
32   |Create geo_locations index on country / location             |indexes/geo/install/geo_locations_country_location_create.sql                 |         |Drop geo_locations index on country / location           |                                                                          |         |                                                  |
33   |Create geo_locations index on lc_location                    |indexes/geo/install/geo_locations_lc_location_create.sql                      |         |Drop geo_locations index on lc_location                  |                                                                          |         |                                                  |
34   |Create geo_locations index on location                       |indexes/geo/install/geo_locations_location_create.sql                         |         |Drop geo_locations index on location                     |                                                                          |         |                                                  |
35   |Create geo_postcodes index                                   |indexes/geo/install/geo_postcodes_country_postcode_create.sql                 |         |Drop geo_postcodes index                                 |                                                                          |         |                                                  |
36   |Create geo_postcodes index on lc_location                    |indexes/geo/install/geo_postcodes_lc_location_create.sql                      |         |Drop geo_postcodes index on lc_location                  |                                                                          |         |                                                  |
37   |Create geo_postcodes index on postcode_id                    |indexes/geo/install/geo_postcodes_postcode_id_create.sql                      |         |Drop geo_postcodes index on postcode_id                  |                                                                          |         |                                                  |
38   |Create geo_regions index on lc_region                        |indexes/geo/install/geo_regions_lc_region_create.sql                          |         |Drop geo_regions index on lc_region                      |                                                                          |         |                                                  |
39   |Create geo_regions index on region_id                        |indexes/geo/install/geo_regions_region_id_create.sql                          |         |Drop geo_regions index on region_id                      |                                                                          |         |                                                  |


-- Populate the geo tables
50   |Populate the geo_countries table                             |load-data-scripts/geo/install/geo_countries_00001_insert.sql                  |252      |Reverts the data loaded into geo_countries               |load-data-scripts/geo/uninstall/geo_countries_00001_delete.sql            |         |data/geo/geo_countries.csv                        |
-- 51   |Populate the geo_distances table                             |load-data-scripts/geo/install/geo_distances_00001_insert.sql                  |2615722  |Reverts the data loaded into geo_distances               |load-data-scripts/geo/uninstall/geo_distances_00001_delete.sql            |         |data/geo/geo_distances.csv                        |
-- 52   |Populate the geo_locations table                             |load-data-scripts/geo/install/geo_locations_00001_insert.sql                  |18959    |Reverts the data loaded into geo_locations               |load-data-scripts/geo/uninstall/geo_locations_00001_delete.sql            |         |data/geo/geo_locations.csv                        |
-- 53   |Populate the geo_postcodes table                             |load-data-scripts/geo/install/geo_postcodes_00001_insert.sql                  |1796411  |Reverts the data loaded into geo_postcodes               |load-data-scripts/geo/uninstall/geo_postcodes_00001_delete.sql            |         |data/geo/geo_postcodes.csv                        |
-- 54   |Populate the geo_regions table                               |load-data-scripts/geo/install/geo_regions_00001_insert.sql                    |8142     |Reverts the data loaded into geo_regions                 |load-data-scripts/geo/uninstall/geo_regions_00001_delete.sql              |         |data/geo/geo_regions.csv                          |

-- Create geo procedures and function 
-- 60   |Drop function sf_geo_location_nearest_location_id_get        |functions/geo/uninstall/sf_geo_location_nearest_location_id_get_drop.sql      |         |Drop function sf_geo_location_nearest_location_id_get    |functions/geo/uninstall/sf_geo_location_nearest_location_id_get_drop.sql  |         |                                                  |
-- 61   |Create function sf_geo_location_nearest_location_id_get      |functions/geo/install/sf_geo_location_nearest_location_id_get_create.sql      |         |Drop function sf_geo_location_nearest_location_id_get    |functions/geo/uninstall/sf_geo_location_nearest_location_id_get_drop.sql  |         |                                                  |

-- Create user auth tables
-- 70   |Drop the user_login table                                    |tables/user/uninstall/user_login_drop.sql                                     |         |Drop the user_login table                                |tables/user/uninstall/user_login_drop.sql                                 |         |                                                  |
-- 71   |Create the user_login table                                  |tables/user/install/user_login.sql                                            |         |Drop the user_login table                                |tables/user/uninstall/user_login_drop.sql                                 |         |                                                  |
-- 72   |Drop the user_details table                                  |tables/user/uninstall/user_details_drop.sql                                   |         |Drop the user_details table                              |tables/user/uninstall/user_details_drop.sql                               |         |                                                  |
-- 73   |Create the user_details table                                |tables/user/install/user_details.sql                                          |         |Drop the user_details table                              |tables/user/uninstall/user_details_drop.sql                               |         |                                                  |

